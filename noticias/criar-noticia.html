<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create/Edit News - Guarini e-sport</title>
  <link rel="icon" href="../img-site/favicon.png" type="image/png">
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="criar-noticia.css">
  <meta name="theme-color" content="#ffad00">
</head>

<body>
  <header>
    <div class="header-wrapper">
      <nav class="nav-group left-nav">
        <ul>
          <li><a href="../loja/loja.html">Shop</a></li>
          <li><a href="../sobre/sobre.html">About</a></li>
        </ul>
      </nav>
      
      <div class="logo-center">
        <a href="../index.html" aria-label="InÃ­cio">
          <img src="../img-site/grn-logo.png" alt="Guarini e-sport" class="header-logo">
        </a>
      </div>

      <nav class="nav-group right-nav">
        <ul>
          <li><a href="../groups/groups.html">Games</a></li>
          <li><a href="../contato/contato.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Menu dropdown do usuÃ¡rio -->
  <div class="user-menu-container">
    <button class="user-menu-toggle" id="userMenuToggle" aria-label="Menu do usuÃ¡rio">
      <span></span>
      <span></span>
      <span></span>
    </button>
    
    <div class="user-dropdown" id="userDropdown">
      <div class="user-dropdown-header" id="userDropdownHeader">
        <span>Hello, visitor!</span>
      </div>
      <ul class="user-dropdown-list">
        <li><a href="../perfil/perfil.html" id="perfilLink">Profile</a></li>
        <li><a href="../loja/loja.html">Shop</a></li>
        <li><a href="../sobre/sobre.html">About</a></li>
        <li><a href="../groups/groups.html">Games</a></li>
        <li><a href="../contato/contato.html">Contact</a></li>
        <li><a href="#" id="authLink">Login</a></li>
      </ul>
    </div>
  </div>

  <main class="editor-main">
    <div class="editor-container">
      <!-- CabeÃ§alho do Editor -->
      <div class="editor-header">
        <button onclick="history.back()" class="btn-voltar">
          â† Back
        </button>
        <h1 id="pageTitle">Create New Article</h1>
      </div>

      <!-- Mensagem de carregamento -->
      <div id="loadingMessage" class="loading-message" style="display: none;">
        ğŸ”„ Loading article...
      </div>

      <!-- FormulÃ¡rio de EdiÃ§Ã£o -->
      <form id="noticiaForm" class="noticia-form">
        
        <!-- TÃ­tulo -->
        <div class="form-group">
          <label for="tituloInput">Title *</label>
          <input 
            type="text" 
            id="tituloInput" 
            class="form-input" 
            placeholder="Digite o tÃ­tulo..."
            maxlength="150"
            required
          >
          <span class="char-counter" id="tituloCounter">0/150</span>
        </div>

        <!-- Seletor de Idioma -->
        <div class="form-group">
          <label for="idiomaSelect">Language *</label>
          <p class="help-text">Select the primary language of the content</p>
          <select id="idiomaSelect" class="form-input" required>
            <option value="pt-BR">ğŸ‡§ğŸ‡· Portuguese</option>
            <option value="en">ğŸ‡ºğŸ‡¸ English</option>
            <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª (Japanese)</option>
          </select>
        </div>

        <!-- Metadados (data e autor) -->
        <div class="noticia-metadata" id="noticiaMetadata" style="display: none;">
          <div class="metadata-item">
            <span class="metadata-label">ğŸ“… Date:</span>
            <span id="dataPublicacao">-</span>
          </div>
          <div class="metadata-item">
            <span class="metadata-label">ğŸ‘¤ Writer:</span>
            <a href="#" id="autorLink" class="autor-link" target="_blank">
              <img src="" alt="Avatar" id="autorAvatar" class="autor-avatar">
              <span id="autorNome">-</span>
            </a>
          </div>
          <div class="metadata-item" id="ultimaAtualizacao" style="display: none;">
            <span class="metadata-label">ğŸ”„ Last updated on:</span>
            <span id="dataAtualizacao">-</span>
          </div>
        </div>

        <!-- Imagem Principal -->
        <div class="form-group">
          <label>Featured Image *</label>
          <p class="help-text">This image will appear on the article card on the homepage</p>
          
          <div class="imagem-principal-preview" id="imagemPrincipalPreview">
            <div class="preview-placeholder">
              <span>ğŸ“·</span>
              <p>No image selected</p>
              <small>Recommended size: 1200x630px (16:9 ratio)</small>
              <small>Accepted formats: JPG, PNG, WebP</small>
              <small>Maximum size: 5MB</small>
            </div>
          </div>

          <div class="upload-buttons">
            <input 
              type="file" 
              id="imagemPrincipalInput" 
              accept="image/*" 
              style="display: none;"
            >
            <button 
              type="button" 
              class="btn-upload" 
              onclick="document.getElementById('imagemPrincipalInput').click()"
            >
              ğŸ“ Choose Featured Image
            </button>
            <button 
              type="button" 
              class="btn-remove-img" 
              id="btnRemoverImagemPrincipal"
              style="display: none;"
            >
              ğŸ—‘ï¸ Remove
            </button>
          </div>
        </div>

        <!-- Editor de ConteÃºdo -->
        <div class="form-group">
          <label for="conteudoEditor">Article Content *</label>
          <p class="help-text">Write the full article content. Use the formatting tools below.</p>
          
          <!-- Barra de Ferramentas -->
          <div class="editor-toolbar">
            <button type="button" class="toolbar-btn" data-comando="bold" title="Negrito">
              <strong>B</strong>
            </button>
            <button type="button" class="toolbar-btn" data-comando="italic" title="ItÃ¡lico">
              <em>I</em>
            </button>
            <button type="button" class="toolbar-btn" data-comando="underline" title="Sublinhado">
              <u>U</u>
            </button>
            <div class="toolbar-separator"></div>
            <button type="button" class="toolbar-btn" data-comando="insertUnorderedList" title="Lista">
              â€¢ List
            </button>
            <button type="button" class="toolbar-btn" data-comando="insertOrderedList" title="Lista Numerada">
              1. List
            </button>
            <div class="toolbar-separator"></div>
            <button type="button" class="toolbar-btn" data-comando="justifyLeft" title="Alinhar Ã  Esquerda">
              â¬…ï¸
            </button>
            <button type="button" class="toolbar-btn" data-comando="justifyCenter" title="Centralizar">
              â†”ï¸
            </button>
            <button type="button" class="toolbar-btn" data-comando="justifyRight" title="Alinhar Ã  Direita">
              â¡ï¸
            </button>
          </div>

          <!-- Ãrea de EdiÃ§Ã£o -->
          <div 
            id="conteudoEditor" 
            class="conteudo-editor" 
            contenteditable="true"
            data-placeholder="Digite o conteÃºdo da notÃ­cia aqui..."
          ></div>

          <div class="editor-word-count">
            <span id="wordCount">0 words</span>
          </div>
        </div>

        <!-- Upload de Imagens para o ConteÃºdo -->
        <div class="form-group">
          <label>Content Images</label>
           <p class="help-text">
              Add images that will be inserted into the article content<br>
              <strong>ğŸ“Œ Tip:</strong> You can add captions to the images after inserting them.
            </p>
          
          <div class="imagens-conteudo-grid" id="imagensConteudoGrid">
            <!-- Imagens serÃ£o adicionadas aqui dinamicamente -->
          </div>

          <input 
            type="file" 
            id="imagensConteudoInput" 
            accept="image/*" 
            multiple 
            style="display: none;"
          >
          <button 
            type="button" 
            class="btn-upload" 
            onclick="document.getElementById('imagensConteudoInput').click()"
          >
            ğŸ“ Add Images to Content
          </button>
        </div>

        <div class="imagens-info-box">
          <p>â„¹ï¸ <strong>How to use images in the content:</strong></p>
          <ul>
            <li>1ï¸âƒ£ Upload the images above</li>
            <li>2ï¸âƒ£ Click "Insert with Caption" to add them to the text</li>
            <li>3ï¸âƒ£ Enter the image caption when prompted</li>
            <li>4ï¸âƒ£ The image will be inserted at the cursor location with a formatted caption</li>
          </ul>
        </div>

        <!-- BotÃµes de AÃ§Ã£o -->
        <div class="form-actions">
          <button type="button" class="btn-salvar-rascunho" id="btnSalvarRascunho">
            ğŸ’¾ Save as Draft
          </button>
          <button type="submit" class="btn-publicar" id="btnPublicar">
            âœ… Publish Article
          </button>
          <button type="button" class="btn-cancelar" onclick="confirmarSaida()">
            âŒ Cancel
          </button>
        </div>

      </form>
    </div>
  </main>

  <footer>
    <div class="footer-info">
      <p>&copy; Â© 2019 Guarini E-sport. All rights reserved.</p>
      <p><a href="https://linktr.ee/guariniesports" target="_blank">Follow us on social media!</a></p>
      <p>Created by: Lobo & Shad</p>
    </div>
  </footer>

  <!-- Firebase SDK -->
  <script type="module" src="criar-noticia.js"></script>
</body>
</html>