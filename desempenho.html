<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Site oficial da equipe Guarin√≠ e-sport, desde 2019 unindo for√ßa, estrat√©gia e paix√£o pelos games.">
  <title>Calculadora de Desempenho - Pok√©mon Unite</title>
  <link rel="icon" href="favicon.png" type="image/png">
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  </head>
<body>
  <header>
    <h1>Guarin√≠ e-sport</h1>
    <nav>
      <ul>
        <li><a href="index.html">In√≠cio</a></li>
        <li><a href="sobre.html">Sobre</a></li>
        <li><a href="times.html">Times</a></li>
        <li><a href="loja.html">Loja</a></li>
        <li><a href="desempenho.html" class="ativo">Calculadora</a></li>
        <li><a href="contato.html">Contato</a></li>
      </ul>
    </nav>
  </header>

<section class="container calculadora">
  <h2 class="titulo-pagina">Calculadora de Desempenho - Pok√©mon Unite</h2>

  <label for="jogador">Nome do Jogador:</label>
  <input type="text" id="jogador" class="form-control" placeholder="Ex: Fulano">

  <label for="pokemon">Escolha o Pok√©mon:</label>
  <select id="pokemon" class="form-control" onchange="atualizarImagemPokemon()">
    <option value="" disabled selected>Selecione</option>
  </select>
  <img id="imagemPokemon" src="" alt="Pok√©mon" style="display: none;">

  <label for="role">Selecione a Fun√ß√£o (Role):</label>
  <select id="role" class="form-control">
    <option value="">Selecione</option>
    <option value="ADC">ADC</option>
    <option value="JGL">JGL</option>
    <option value="TOP">TOP</option>
    <option value="SUP">SUP</option>
    <option value="TANK">TANK</option>
  </select>

  <label for="dadosTexto">Cole os dados do site aqui:</label>
  <textarea id="dadosTexto" rows="6" class="form-control" placeholder="Cole os dados brutos aqui..."></textarea>

  <div class="botoes-calculadora">
    <button class="btn" onclick="carregarDados()">Carregar Dados</button>
    <button class="btn" onclick="calcularDesempenho()">Calcular Desempenho</button>
    <button class="btn" onclick="limparCampos()">Limpar</button>
    <button class="btn" onclick="copiarResultado()">Copiar Resultado</button>
  </div>

  <div id="resultado" class="resultado-calculadora"></div>
</section>


  <script>
    const pokemons = [
      "Absol", "Aegislash", "Alcremie", "Alolan Ninetales", "Alolan Raichu", "Armarouge", "Azumarill",
      "Blastoise", "Blaziken", "Blissey", "Buzzwole", "Ceruledge", "Chandelure", "Charizard",
      "Cinderace", "Clefable", "Comfey", "Cramorant", "Crustle", "Darkrai", "Decidueye", "Delphox",
      "Dodrio", "Dragapult", "Dragonite", "Duraludon", "Eldegoss", "Espeon", "Falinks",
      "Galarian Rapidash", "Garchomp", "Gardevoir", "Gengar", "Glaceon", "Goodra", "Greedent",
      "Greninja", "Gyarados", "Ho-Oh", "Hoopa", "Inteleon", "Lapras", "Latias", "Latios",
      "Leafeon", "Lucario", "Machamp", "Mamoswine", "Meowscarada", "Metagross", "Mew", "Mewtwo Y",
      "Mewtwo X", "Mimikyu", "Miraidon", "Mr. Mime", "Pikachu", "Psyduck", "Sableye", "Scizor",
      "Slowbro", "Snorlax", "Suicune", "Sylveon", "Talonflame", "Tinkaton", "Trevenant", "Tsareena",
      "Tyranitar", "Umbreon", "Urshifu", "Venusaur", "Wigglytuff", "Zacian", "Zeraora", "Zoroark"
    ];

    const select = document.getElementById("pokemon");
    pokemons.forEach(p => {
      const opt = document.createElement("option");
      opt.value = p;
      opt.textContent = p;
      select.appendChild(opt);
    });

    function atualizarImagemPokemon() {
      const nome = document.getElementById("pokemon").value;
      const img = document.getElementById("imagemPokemon");
      img.src = `https://img.pokemondb.net/sprites/home/normal/${nome.toLowerCase().replace(/ /g, "-").replace(".", "").replace("‚ôÄ", "f").replace("‚ôÇ", "m")}.png`;
      img.style.display = "block";
    }

    let season = {}, total = {};

    function carregarDados() {
      const texto = document.getElementById("dadosTexto").value;
      if (!texto) return alert("Cole os dados do site!");

      season = {
        battles: parseInt(texto.match(/Season Battles\s+(\d+)/)?.[1]) || 0,
        wins: parseInt(texto.match(/Season Wins\s+(\d+)/)?.[1]) || 0,
        mvps: parseInt(texto.match(/Season MVP\s+(\d+)/)?.[1]) || 0
      };
      season.losses = season.battles - season.wins;

      total = {
        battles: parseInt(texto.match(/Total Battles\s+(\d+)/)?.[1]) || 0,
        wins: parseInt(texto.match(/No\. Of Wins\s+(\d+)/)?.[1]) || 0,
        mvps: parseInt(texto.match(/Total MVP\s+(\d+)/)?.[1]) || 0
      };
      total.losses = total.battles - total.wins;

      if (season.battles === 0 && total.battles === 0) {
        alert("Dados inv√°lidos. Verifique o conte√∫do colado.");
        return;
      }

      alert("Dados carregados com sucesso!");
    }

    function avaliarDesempenho(role, desempenho) {
      if (["ADC", "JGL", "TOP"].includes(role)) {
        if (desempenho < 30) return "Fraco";
        if (desempenho < 50) return "Mediano";
        if (desempenho < 70) return "Bom";
        if (desempenho < 90) return "Muito bom";
        return "Excelente";
      } else if (["SUP", "TANK"].includes(role)) {
        if (desempenho < 30) return "Fraco";
        if (desempenho < 50) return "Mediano";
        if (desempenho < 70) return "Bom";
        if (desempenho < 90) return "Muito bom";
        return "Excelente";
      }
    }

    function calcularPorcentagens(stats) {
      const winRate = stats.battles ? (stats.wins / stats.battles) * 100 : 0;
      const mvpRate = stats.battles ? (stats.mvps / stats.battles) * 100 : 0;
      const mvpWinRate = stats.wins ? (stats.mvps / stats.wins) * 100 : 0;
      return {
        winRate: winRate.toFixed(2),
        mvpRate: mvpRate.toFixed(2),
        mvpWinRate: mvpWinRate.toFixed(2)
      };
    }

    function calcularDesempenho() {
  const jogador = document.getElementById("jogador").value;
  const pokemon = document.getElementById("pokemon").value;
  const role = document.getElementById("role").value;

  if (!jogador || !pokemon || !role) {
    alert("Preencha todos os campos obrigat√≥rios!");
    return;
  }

  const temp = calcularPorcentagens(season);
  const tot = calcularPorcentagens(total);

  const desempenhoTemporada = calcularDesempenhoCombinado(temp.winRate, temp.mvpWinRate, role);
  const desempenhoTotal = calcularDesempenhoCombinado(tot.winRate, tot.mvpWinRate, role);

  let mensagemMultiplicador = "";
  if (role === "SUP" || role === "TANK") {
    mensagemMultiplicador = "\n\n‚ö†Ô∏è No c√°lculo de desempenho de SUP e TANK √© utilizado um multiplicador para o valor de MVP, pois essas roles t√™m menos MVPs por partida.";
  }

  const resultadoFinal = `Jogador: ${jogador}
Pok√©mon: ${pokemon}
Fun√ß√£o: ${role}

üîπ Temporada:
- Partidas: ${season.battles}
- Vit√≥rias: ${season.wins}
- Derrotas: ${season.losses}
- MVPs: ${season.mvps}
- Win Rate: ${temp.winRate}%
- MVP/Partida: ${temp.mvpRate}%
- MVP/Vit√≥ria: ${temp.mvpWinRate}%
- üîç Desempenho da Temporada: ${desempenhoTemporada}%
- ‚úÖ Avalia√ß√£o: ${avaliarDesempenho(role, desempenhoTemporada)}

üî∏ Total:
- Partidas: ${total.battles}
- Vit√≥rias: ${total.wins}
- Derrotas: ${total.losses}
- MVPs: ${total.mvps}
- Win Rate: ${tot.winRate}%
- MVP/Partida: ${tot.mvpRate}%
- MVP/Vit√≥ria: ${tot.mvpWinRate}%
- üîç Desempenho Total: ${desempenhoTotal}%
- ‚úÖ Avalia√ß√£o: ${avaliarDesempenho(role, desempenhoTotal)}${mensagemMultiplicador}`;

  document.getElementById("resultado").innerText = resultadoFinal;
}

    function limparCampos() {
      document.getElementById("jogador").value = "";
      document.getElementById("pokemon").value = "";
      document.getElementById("role").value = "";
      document.getElementById("dadosTexto").value = "";
      document.getElementById("imagemPokemon").style.display = "none";
      document.getElementById("resultado").innerText = "";
    }

    function copiarResultado() {
      const texto = document.getElementById("resultado").innerText;
      if (!texto) return alert("Nenhum resultado para copiar!");
      navigator.clipboard.writeText(texto);
      alert("Resultado copiado para a √°rea de transfer√™ncia!");
    }

function calcularDesempenhoCombinado(winRate, mvpWinRate, role) {
  const win = parseFloat(winRate);
  let mvp = parseFloat(mvpWinRate);

  // Aumenta o peso do MVP/Vit√≥ria para SUP e TANK
  if (role === "SUP" || role === "TANK") {
    mvp *= 2.5; // Multiplicador SUP TANK
  }

  return ((win + mvp) / 2).toFixed(2);
}

  </script>

  <footer>
    <p>&copy; 2025 Guarin√≠ e-sport. Todos os direitos reservados.</p>
    <p><a href="https://linktr.ee/guariniesports" target="_blank">Conhe√ßa nossas redes sociais</a></p>
    <p>Created by: Lobo</p>
  </footer>
</body>
</html>