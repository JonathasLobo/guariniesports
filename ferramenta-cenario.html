<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Calculadora de Winrate Ranqueado - Pok√©mon Unite">
  <title>Calculadora de Winrate Ranqueado - Pok√©mon Unite</title>
  <link rel="icon" href="favicon.png" type="image/png">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="ferramenta-cenario.css">
  
  <!-- üî• Verifica√ß√£o de Acesso ANTES de carregar a p√°gina -->
  <script type="module">
    import { checkAccess } from './auth.js';
    
    // Define uma flag global quando o acesso √© permitido
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        const acessoPermitido = await checkAccess(2);
        if (!acessoPermitido) return;
        
        window.acessoWinratePermitido = true;
        console.log("Acesso permitido √† calculadora winrate");
        
        // Carrega a winrate.js dinamicamente
        const script = document.createElement('script');
        script.type = 'module';
        script.src = 'ferramenta-cenario.js';
        document.body.appendChild(script);
        
      } catch (error) {
        console.error("Erro na verifica√ß√£o de acesso:", error);
      }
    });
  </script>
  <div id="google_translate_element"></div>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement(
    {pageLanguage: 'pt', includedLanguages: 'pt,en,ja'},
    'google_translate_element'
  );
}
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<!-- Adsense tag -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4262085354518962"
     crossorigin="anonymous"></script>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-84NHN394WF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-84NHN394WF');
</script>
<body>
  <div class="winrate-container">
    <section class="container winrate">
      <a href="material.html" class="winrate-voltar">‚Üê Voltar para o in√≠cio</a>

      <h2>üìä Calculadora de Winrate Ranqueado</h2>

      <label for="jogador">Nome do Jogador:</label>
      <input type="text" id="jogador" class="form-control" placeholder="Ex: Fulano">

      <label for="dadosTexto">Cole os dados ranqueados do site aqui:</label>
      <textarea id="dadosTexto" rows="8" class="form-control" placeholder="Cole os dados brutos do seu perfil ranqueado aqui...&#10;&#10;üìã EXEMPLO EM INGL√äS:&#10;MVP&#10;**3245**&#10;Score&#10;**681539**&#10;Total Battles&#10;**7684**&#10;No. Of Wins&#10;**4678**&#10;Current Lose Streak&#10;**1**&#10;Current Win Streak&#10;**0**&#10;Win Streak Record&#10;**20**&#10;Total Eliminations&#10;**74854**&#10;&#10;üìã EXEMPLO EM PORTUGU√äS:&#10;MVP&#10;**2690**&#10;Pontua√ß√£o&#10;**1071954**&#10;Batalhas totais&#10;**16460**&#10;No. de Vit√≥rias&#10;**7563**&#10;Sequ√™ncia de Derrotas Atual&#10;**0**&#10;Sequ√™ncia de Vit√≥rias Atual&#10;**1**&#10;Recorde de Sequ√™ncia de Vit√≥rias&#10;**12**&#10;Elimina√ß√µes Totais&#10;**75100**"></textarea>

      <div class="botoes-winrate">
        <button class="btn" onclick="calcularWinrate()">Calcular Winrate</button>
        <button class="btn" onclick="limparCampos()">Limpar</button>
        <button class="btn" onclick="copiarResultado()">Copiar Resultado</button>
      </div>

      <!-- Resultado em layout de colunas -->
      <div id="resultado-completo" class="resultado-container">
        <div class="resultado-dados">
          <div class="coluna-estatisticas">
            <h3>üìà Estat√≠sticas Ranqueadas</h3>
            <div id="info-jogador" class="info-jogador-simples"></div>
            <div id="dados-estatisticas"></div>
          </div>
          
          <div class="coluna-performance">
            <h3>üèÜ Performance</h3>
            <div id="dados-performance"></div>
          </div>
        </div>
      </div>

      <!-- Div original mantida oculta para a fun√ß√£o copiar resultado -->
      <div id="resultado" class="resultado-winrate" style="display: none;"></div>
    </section>
    
    <script src="ferramenta-cenario.js"></script>
  </div>

  <footer>
    <p>&copy; 2019 Guarin√≠ e-sport. Todos os direitos reservados.</p>
    <p><a href="https://linktr.ee/guariniesports" target="_blank">Conhe√ßa nossas redes sociais</a></p>
    <p>Created by: Lobo</p>
  </footer>
  
  <script>
    // Funcionalidade do menu mobile
    const menuToggle = document.querySelector('.menu-toggle');
    const mobileMenu = document.querySelector('.mobile-menu');

    if (menuToggle && mobileMenu) {
      menuToggle.addEventListener('click', function() {
        this.classList.toggle('ativo');
        mobileMenu.classList.toggle('ativo');
      });

      // Fechar menu ao clicar em um link
      const mobileLinks = document.querySelectorAll('.mobile-menu a');
      mobileLinks.forEach(link => {
        link.addEventListener('click', function() {
          menuToggle.classList.remove('ativo');
          mobileMenu.classList.remove('ativo');
        });
      });

      // Fechar menu ao redimensionar para desktop
      window.addEventListener('resize', function() {
        if (window.innerWidth > 900) {
          menuToggle.classList.remove('ativo');
          mobileMenu.classList.remove('ativo');
        }
      });
    }
  </script>
</body>
</html>