<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vod Review | Guariní e-sport</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="favicon.png" type="image/png" />
  <div id="google_translate_element"></div>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement(
    {pageLanguage: 'pt', includedLanguages: 'pt,en,ja'},
    'google_translate_element'
  );
}
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<!-- Adsense tag -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4262085354518962"
     crossorigin="anonymous"></script>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-84NHN394WF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-84NHN394WF');
</script>
<body>
  <header>
    <h1>Guariní e-sport</h1>
    <nav aria-label="Menu principal">
      <ul>
        <li><a href="index.html">Início</a></li>
        <li><a href="sobre.html">Sobre</a></li>
        <li><a href="times.html">Times</a></li>
        <li><a href="loja.html">Loja</a></li>
        <li><a href="contato.html">Contato</a></li>
        <li><a href="vodreview.html" class="ativo">Vod Review</a></li>
      </ul>
    </nav>
  </header>

        <div id="playlist-container" class="news">
            <h2>Vod Review</h2>
            <div id="playlist"></div>
            <div id="video-player">
                <button class="back-button" onclick="backToPlaylist()">Voltar</button>
                <iframe id="youtubePlayer" width="640" height="360" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <script>
       const apiKey = 'AIzaSyCwdZ5GOzzh0P_ihqKg_8eh_TsNDLPA4bI';
        const playlistId = 'PLYJf4nRLwPFt1T40kN_sePLvSTD4JWqqi';
        let videoIds = [];
        let currentVideoIndex = 0;
        let player; // Instância do player do YouTube

        // Função para buscar os vídeos da playlist
        function fetchPlaylistVideos() {
            const url = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=6&playlistId=${playlistId}&key=${apiKey}`;

            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Erro ao acessar a API do YouTube');
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.items.length === 0) {
                        console.log('Nenhum vídeo encontrado na playlist.');
                    } else {
                        videoIds = data.items.map(item => item.snippet.resourceId.videoId);
                        loadPlaylist();
                    }
                })
                .catch(error => {
                    console.error('Erro ao buscar vídeos da playlist:', error);
                    alert('Houve um erro ao carregar a playlist. Verifique a chave de API e a playlist.');
                });
        }

        // Função para carregar a lista de vídeos
        function loadPlaylist() {
            const playlistContainer = document.getElementById('playlist');
            playlistContainer.innerHTML = '';

            videoIds.forEach((videoId, index) => {
                const thumbnailDiv = document.createElement('div');
                thumbnailDiv.classList.add('video-thumbnail');
                thumbnailDiv.onclick = function() {
                    playVideo(index);
                };

                const thumbnailImage = document.createElement('img');
                thumbnailImage.src = `https://img.youtube.com/vi/${videoId}/mqdefault.jpg`;
                thumbnailDiv.appendChild(thumbnailImage);

                playlistContainer.appendChild(thumbnailDiv);
            });
        }

        // Função para reproduzir o vídeo
        function playVideo(index) {
            currentVideoIndex = index;
            const videoId = videoIds[currentVideoIndex];
            const playerContainer = document.getElementById('video-player');
            const iframe = document.getElementById('youtubePlayer');

            // Esconde a lista de vídeos e mostra o player
            document.getElementById('playlist').style.display = 'none';
            playerContainer.style.display = 'block';

            // Carrega o vídeo no player
            iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&enablejsapi=1`;
        }

        // Função para recarregar a página
        function backToPlaylist() {
            location.reload();  // Recarrega a página atual, voltando à playlist
        }

        // Função chamada quando o estado do player mudar
        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.ENDED) {
                // Avança para o próximo vídeo quando o atual terminar
                currentVideoIndex = (currentVideoIndex + 1) % videoIds.length;
                player.loadVideoById(videoIds[currentVideoIndex]);
            }
        }

        // Função chamada quando a API do YouTube estiver carregada
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtubePlayer', {
                height: '768',
                width: '1024',
                videoId: videoIds[currentVideoIndex], // Carrega o vídeo inicialmente
                events: {
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        // Carregar o script da API do YouTube
        const script = document.createElement('script');
        script.src = "https://www.youtube.com/iframe_api";
        document.body.appendChild(script);

        // Carregar os vídeos da playlist ao carregar a página
        window.onload = fetchPlaylistVideos;

    </script>

</body>
</html>